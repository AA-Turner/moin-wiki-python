Here's how to find all the modules in some directory, and import them.

[[TableOfContents()]]

== Finding Functions Within a Module ==

So, putting them together,...

{{{
#!python
def functions_in_module(module)
    functions = []
    for obj in module.__dict__.values():
        if isinstance(obj, types.FunctionType):
            functions.append(obj)
    return functions
}}}

== Finding Modules in a Directory ==

Is there a better way than just listing the contents of the directory, and taking those tiles that end with ".pyc" or ".py"..?

But perhaps there isn't.

{{{
#!python
import os
import sets

def find_modules(path="."):
    """Return names of modules in a directory.

    Returns module names in a list. Filenames that end in ".py" or
    ".pyc" are considered to be modules. The extension is not included
    in the returned list.
    """
    modules = sets.Set()
    for filename in os.listdir(path):
        module = None
        if filename.endswith(".py"):
            module = filename[:-3]
        elif filename.endswith(".pyc"):
            module = filename[:-4]
        if module is not None:
            s.add(module)
    return list(modules)
}}}

== Importing the Modules ==

How do you import a module, once you have it's name?

With the [http://www.python.org/doc/current/lib/module-imp.html the imp module!] It dynamically loads named modules.

{{{
#!python
import imp

def load_module(name, path=["."]):
    """Return a named module found in a given path."""
    (file, pathname, description) = imp.find_module(name, path)
    return imp.load_module(name, file, pathname, description)

modules = [load_module(name) for name in find_modules()]
}}}

== Finding the Things Inside a Module ==

Once you have your module, you can look inside it, with {{{.__dict__}}}.

{{{
#!python
module.__dict__
}}}

== Identifying Functions ==

If you want to identify, say, functions within the module, you can write code similar to so:

{{{
#!python
import types

def is_it_a_function(obj):
    return isinstance(obj, types.FunctionType)

def functions_in_module(module):
    functions = []
    for obj in module.__dict__.values():
        if is_it_a_function(obj):
            functions.append(obj)
    return functions
}}}

= Discussion =

  (none yet!)
