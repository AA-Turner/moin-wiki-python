(Back to ["Python3000"].)

= List of tests that are failing in the py3k branch =

We're now maintaining a list of tasks in a shared spreadsheet: http://spreadsheets.google.com/ccc?key=pBLWM8elhFAmKbrhhh0ApQA

Protocol:

  * if you start working on a test, to avoid duplicate work, add your name+email+date to the bulleted item for the test below, with the text "MINE"
  * if you figure out why a test is failing, just add a note (name etc. is still appreciated)
  * if you fix a test, and you check in the fix, add a note "COMMITTED" with the svn revision (occasionally we'll clean these up)
  * if you don't have checkin permissions, use the http://bugs.python.org patch manager and note the patch number here (perhaps in the form of a link to python.org/sf/NNNNN), and add a note "FIXED IN SF" (plus name etc.)

== How to run tests ==

Assume you've got the py3k branch checked out.

{{{
./configure
make
./python Lib/test/regrtest.py test_foobar  # runs test_foobar
./python Lib/test/test_foobar.py   # for more detail about failures
}}}

(Some tests need you to use {{{regrtest.py -uall}}} above.)

------

= The Failing Tests =

  * test_email (CosminStejerean - at least some problems seem to be caused by base64MIME, problems with splitting headers into multiple lines - 08/08/07) (VictorStinner - imghdr and sndhdr, related modules, are now fixed) (MINE Barry Warsaw)
  * test_email_codecs
  * test_email_renamed (should we get rid of this, as it's about an old renaming?)
  * test_unicodedata - test_function_checksum fail

== Tests Failing Under Stress ==

A few tests pass normally but fail when run by a debug build using {{{regrtest.py -R4:3:}}}.  This runs the test 7 times to detect leaks.  The following tests have problems under this mode:

  * Confirmed failing tests:

    * None

  * Unconfirmed failing tests:

    * test_tcl - _tkinter.TclError: Calling Tk_Init again after a previous call failed might deadlock
    * test_pkg - test_6 and test_7 fail on the second run of "./python Lib/test/regrtest.py --verbose -R4:3: test_pkg"

  * Leaking tests:

    * test_poplib - leaked [0, -7, -111] references, sum=-118 ?!?!
    * test_urllib2_localnet (leaks random amounts)
    * test_os - leak when run after doing "sync; echo 3 > /proc/sys/vm/drop_caches" to get cold-cache behaviour.
    * test_ftplib
    * test_ctypes - [0, 33, -33] references, sum=0
    * test_datetime - [49, 49, 49] references, sum=147
    * test_io - [62, 62, 62] references, sum=186
    * test_strptime - [2132, 2132, 2132] references, sum=6396
    * test_string - [5, 5, 5] references, sum=15
    * test_urllib - [122, 122, 122] references, sum=366
    * test_xmlrpc - [26, 26, 26] references, sum=78

== Tests Failing on Some Platforms Only ==

  * test_ossaudiodev (64-bit)

  * test_coding (cygwin and some gentoo) - UnicodeDecodeError: 'ascii' codec can't decode byte 0xe1 in position 105: ordinal not in range(128)

  * test_marshal (cygwin)

  * test_normalization (gentoo) - same as test_coding.  On the machine they fail on, locale.getlocale() is (None, None)


=== Other Conditional Failures ===

  * test_shelve fails when the default database chosen by anydbm is bsddb. It works with dbm, gdbm and (presumably) with ndbm (all of which are very similar).
